<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dobble Game</title>
<style>
body {
  font-family: sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 0;
  padding: 20px;
  background: #f0f0f0;
}
h1 {
  font-size: 1.5rem;
  text-align: center;
  margin-bottom: 20px;
}
.cards {
  display: flex;
  gap: 20px;
  flex-wrap: wrap;
  justify-content: center;
  width: 100%;
}
.card {
  background: white;
  border-radius: 20px;
  padding: 15px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
  gap: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  width: 180px;
  height: 180px;
  justify-items: center;
  align-items: center;
  position: relative;
}
.symbol {
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  background: #e0e0e0;
  height: 60px;
  width: 60px;
  cursor: pointer;
  overflow: hidden;
  transition: all 0.3s;
}
.symbol img {
  max-width: 80%;
  max-height: 80%;
  object-fit: contain;
}
.symbol.highlight {
  background: #ffeb3b;
  transform: scale(1.2);
}
@media (max-width: 600px) {
  .card {
    width: 140px;
    height: 140px;
  }
  .symbol {
    height: 50px;
    width: 50px;
  }
}


/* Home button styling */
    .home-button {
      display: inline-block;
      background: #60a5fa;
      color: #fff;
      padding: 10px 20px;
      border-radius: 20px;
      text-decoration: none;
      font-weight: 500;
      margin-bottom: 15px;
      transition: transform 0.2s, background 0.2s;
    }

/* Center the button */
body {
  text-align: center;
}

    .home-button:hover { 
      transform: scale(1.05);
      background: #3b82f6;
    }



</style>
</head>
<body>

<a href="https://feynfou.github.io/DarijaToons-Hub/" class="home-button">   üè† Home / ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©  </a>


<h1 style="font-size: 18px; margin-bottom: 10px;">
    ÿ¥ŸàŸÅ  üéØ Match it
</h1>

<h1>Find the Matching Symbol!</h1>

<div class="cards">
  <div class="card" id="card1"></div>
  <div class="card" id="card2"></div>
</div>

<audio id="audio"></audio>

<script>
let allSymbols = [];
let commonSymbolDivs = [];
let commonSymbol;

// Load Flashcards JSON
fetch('Flashcards.json')
  .then(res => res.json())
  .then(data => {
    allSymbols = [...data.letters, ...data.animals, ...data.colors];
    startGame();
  })
  .catch(err => console.error('Error loading flashcards:', err));

function startGame() {
  const [cardData1, cardData2, common] = generateCards();
  commonSymbol = common;

  renderCard(document.getElementById('card1'), cardData1);
  renderCard(document.getElementById('card2'), cardData2);

  // Save reference to common symbols in both cards
  commonSymbolDivs = Array.from(document.querySelectorAll('.symbol'))
    .filter(div => div.dataset.text === commonSymbol.text);
}

function generateCards() {
  const card1 = [];
  const card2 = [];

  const common = allSymbols[Math.floor(Math.random() * allSymbols.length)];

  while (card1.length < 4) {
    const s = allSymbols[Math.floor(Math.random() * allSymbols.length)];
    if (!card1.some(item => item.text === s.text) && s.text !== common.text) card1.push(s);
  }
  card1.push(common);

  while (card2.length < 4) {
    const s = allSymbols[Math.floor(Math.random() * allSymbols.length)];
    if (!card2.some(item => item.text === s.text) && s.text !== common.text) card2.push(s);
  }
  card2.push(common);

  // Shuffle
  card1.sort(() => Math.random() - 0.5);
  card2.sort(() => Math.random() - 0.5);

  return [card1, card2, common];
}

function renderCard(cardElement, cardData) {
  cardElement.innerHTML = '';
  cardData.forEach(sym => {
    const div = document.createElement('div');
    div.classList.add('symbol');
    div.dataset.audio = sym.audio;
    div.dataset.text = sym.text;

    const img = document.createElement('img');
    img.src = sym.image;
    img.alt = sym.text;
    div.appendChild(img);

    div.addEventListener('click', () => checkMatch(div));
    cardElement.appendChild(div);
  });
}

function checkMatch(clickedDiv) {
  if (clickedDiv.dataset.text === commonSymbol.text) {
    clickedDiv.classList.add('highlight');
    commonSymbolDivs.forEach(div => div.classList.add('highlight'));

    const audio = document.getElementById('audio');
    audio.src = clickedDiv.dataset.audio;
    audio.play();

    // Generate new cards after a short delay
    setTimeout(() => {
      startGame();
    }, 800); // 0.8 seconds delay for highlight effect
  }
}
</script>

</body>
</html>
